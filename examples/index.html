<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Backbone.DeepModel Simple Example</title>
    <link href="./style.css" rel="stylesheet">
  </head>
  <body>
    <div class="output"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.3/backbone-min.js"></script>
    <script src="../dist/backbone.deepmodel.js"></script>
    <script src="./util.js"></script>
    <script>
      var Person = Backbone.DeepModel.extend({
        defaults: {
          name: {first: '', last: ''},
          pets: []
        }
      })

      var p = new Person()

      // Object
      p.set('name.first', 'Tom')
      p.set('name.last', 'Watson')
      console.log(p.get('name')) //=> {first: 'Tom', last: 'Watson'}
      console.log(p.get('name.first')) //=> 'Tom'
      console.log(p.get('name.last')) //=> 'Watson'

      // Array
      p.set('pets[0]', {name: 'Mi', kind: 'Cat'})
      p.set('pets.1', {name: 'Boo', kind: 'Dog'})
      console.log(p.get('pets[0].name')) //=> 'Mi'
      console.log(p.get('pets[0].kind')) //=> 'Cat'
      console.log(p.get('pets.1')) //=> {name: 'Boo', kind: 'Dog'}

      // key-value style
      p.set({
        'name.first': 'Ken',
        'pets[0].name': 'Tama'
      })
      console.log(p.get('name.first')) //=> 'Ken'
      console.log(p.get('pets[0].name')) //=> 'Tama'
    </script>
  </body>
</html>
